<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <!-- Previna zoom automÃ¡tico e ajuste para telas modernas -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  
  <title>AnÃ¡lise Facial Inteligente</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#FF5733">

  <link rel="stylesheet" href="style.css">

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
  <!-- Status da API -->
  <div id="apiStatus" class="api-status" role="status">
    Detectando API...
  </div>

  <!-- Tela de Consentimento -->
  <section class="consent-screen" id="consentScreen" role="dialog" aria-modal="true" aria-labelledby="consent-title">
    <div class="consent-text">
      <h2 id="consent-title">ğŸ”¬ AnÃ¡lise Facial Inteligente</h2>
      <p>Este aplicativo capturarÃ¡ uma foto do seu rosto e realizarÃ¡ uma anÃ¡lise completa da pele usando inteligÃªncia artificial.</p>
      <p><strong>A anÃ¡lise inclui:</strong></p>
      <ul>
        <li>ClassificaÃ§Ã£o Fitzpatrick</li>
        <li>AnÃ¡lise de textura da pele</li>
        <li>DetecÃ§Ã£o de manchas</li>
        <li>AnÃ¡lise de linhas de expressÃ£o</li>
      </ul>
      <p>A imagem serÃ¡ processada de forma segura e vocÃª poderÃ¡ salvar os resultados.</p>
      <p><small>Ao continuar, vocÃª concorda com o uso da sua cÃ¢mera para fins de anÃ¡lise.</small></p>
    </div>
    <button class="btn" id="acceptConsent">ğŸš€ Iniciar AnÃ¡lise</button>
  </section>
  
  <!-- Interface Principal -->
  <main class="container hidden" id="mainApp" aria-hidden="true">
    <div class="video-container">
      <!-- CÃ¢mera -->
      <video id="video" autoplay playsinline muted aria-label="VisualizaÃ§Ã£o da CÃ¢mera"></video>
      
      <!-- Overlay guia -->
      <div class="overlay">
        <div class="ellipse-guide" role="img" aria-label="Guia de posicionamento facial em formato oval"></div>
      </div>
      
      <!-- InstruÃ§Ãµes -->
      <div class="instructions" role="status">
        <h3>ğŸ“¸ Posicione seu rosto</h3>
        <p>Centralize seu rosto no oval laranja</p>
        <p>Mantenha expressÃ£o neutra e boa iluminaÃ§Ã£o</p>
      </div>
      
      <!-- Controles -->
      <nav class="controls" aria-label="Controles da cÃ¢mera">
        <button class="btn switch-camera" id="switchCamera" aria-label="Trocar entre cÃ¢mera frontal e traseira">ğŸ”„</button>
        <button class="btn capture-btn" id="captureBtn" aria-label="Capturar e Analisar Foto">ğŸ“· Analisar</button>
      </nav>
    </div>
  </main>
  
  <!-- Carregamento -->
  <div class="loading hidden" id="loading" role="alert" aria-live="assertive">
    <div class="loading-spinner"></div>
    <span>Processando...</span>
  </div>
  
  <!-- Canvas oculto -->
  <canvas id="canvas"></canvas>

  <!-- Preview -->
  <section id="previewContainer" class="hidden" role="dialog" aria-modal="true" aria-labelledby="preview-title">
    <h3 id="preview-title">ğŸ“‹ PrÃ©via da Captura</h3>
    <img id="previewImage" alt="Foto capturada para anÃ¡lise">
    <div class="preview-actions">
      <button class="btn" id="downloadBtn" aria-label="Baixar imagem">ğŸ’¾ Baixar</button>
      <button class="btn" id="retryBtn" aria-label="Tentar nova captura">ğŸ”„ Tentar Novamente</button>
    </div>
  </section>

  <script src="app.js"></script>
</body>
</html>
